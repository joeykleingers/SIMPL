# set project's name
PROJECT( RESTClient VERSION ${SIMPLProj_VERSION_MAJOR}.${SIMPLProj_VERSION_MINOR})

set(RESTClient_HDRS
  ${RESTClient_SOURCE_DIR}/config.h
  ${RESTClient_SOURCE_DIR}/mrestrequest.h
  ${RESTClient_SOURCE_DIR}/mrestrequestmanager.h
  ${RESTClient_SOURCE_DIR}/mrestrequestptr.h
  ${RESTClient_SOURCE_DIR}/mrestrequestqueue.h
  ${RESTClient_SOURCE_DIR}/RESTClientDLLExport
  ${RESTClient_SOURCE_DIR}/RESTClient_UI.h
  ${RESTClient_SOURCE_DIR}/SIMPLClientRequest.h
  ${RESTClient_SOURCE_DIR}/SIMPLRestClient.h
  ${RESTClient_SOURCE_DIR}/userptr.h
)

# --------------------------------------------------------------------
# Run Qts automoc program to generate some source files that get compiled
# QT5_WRAP_CPP( SIMPLib_${SUBDIR_NAME}_Generated_MOC_SRCS ${SIMPLib_${SUBDIR_NAME}_Moc_HDRS})
set_source_files_properties( ${RESTClient_Generated_MOC_SRCS} PROPERTIES GENERATED TRUE)
set_source_files_properties( ${RESTClient_Generated_MOC_SRCS} PROPERTIES HEADER_FILE_ONLY TRUE)

set(RESTClient_SRCS
  ${RESTClient_SOURCE_DIR}/config.cpp
  ${RESTClient_SOURCE_DIR}/main.cpp
  ${RESTClient_SOURCE_DIR}/mrestrequest.cpp
  ${RESTClient_SOURCE_DIR}/mrestrequestmanager.cpp
  ${RESTClient_SOURCE_DIR}/mrestrequestqueue.cpp
  ${RESTClient_SOURCE_DIR}/RESTClient_UI.cpp
  ${RESTClient_SOURCE_DIR}/SIMPLClientRequest.cpp
  ${RESTClient_SOURCE_DIR}/SIMPLRestClient.cpp
)

cmp_IDE_SOURCE_PROPERTIES( "${SUBDIR_NAME}" "${RESTClient_HDRS};${RESTClient_HDRS}" "${RESTClient_SRCS}" "${PROJECT_INSTALL_HEADERS}")
cmp_IDE_SOURCE_PROPERTIES( "Generated/RESTClient" "" "${RESTClient_Generated_MOC_SRCS}" "0")

# The UI files As generated by Qt Designer
SET(RESTClient_UIS
  ${RESTClient_SOURCE_DIR}/UI_Files/RESTClient_UI.ui
)
cmp_IDE_GENERATED_PROPERTIES("RESTClient/UI_Files" "${RESTClient_UIS}" "")

# this will run uic on .ui files:
QT5_WRAP_UI( RESTClient_Generated_UI_HDRS ${RESTClient_UIS})

set(PROJECT_SRCS
    ${RESTClient_SRCS}
    ${RESTClient_HDRS}
    ${RESTClient_Generated_UI_HDRS}
)

set(install_dir "bin")
set(lib_install_dir "lib")

if(APPLE)
  get_property(DREAM3D_PACKAGE_DEST_PREFIX GLOBAL PROPERTY DREAM3D_PACKAGE_DEST_PREFIX)
  set(install_dir "${DREAM3D_PACKAGE_DEST_PREFIX}bin")
  set(lib_install_dir "${DREAM3D_PACKAGE_DEST_PREFIX}lib")
elseif(WIN32)
  set(install_dir ".")
  set(lib_install_dir ".")
endif()

BuildToolBundle(
    TARGET RESTClient
    SOURCES ${PROJECT_SRCS}
    DEBUG_EXTENSION ${EXE_DEBUG_EXTENSION}
    VERSION_MAJOR ${SIMPL_VER_MAJOR}
    VERSION_MINOR ${SIMPL_VER_MINOR}
    VERSION_PATCH ${SIMPL_VER_PATCH}
    BINARY_DIR    ${${PROJECT_NAME}_BINARY_DIR}
    LINK_LIBRARIES Qt5::Core Qt5::Network Qt5::Widgets SIMPLib QtWebAppLib
    LIB_SEARCH_DIRS ${CMAKE_LIBRARY_OUTPUT_DIRECTORY} ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}
    COMPONENT     Tools
    INSTALL_DEST  "${install_dir}"
    SOLUTION_FOLDER "Applications"
)


